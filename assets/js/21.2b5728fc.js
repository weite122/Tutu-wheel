(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{377:function(e,t,n){},378:function(e,t,n){},443:function(e,t,n){"use strict";n(377)},444:function(e,t,n){"use strict";n(378)},467:function(e,t,n){"use strict";n.r(t);n(26),n(165),n(68),n(353),n(304);var i={name:"WheelTable",components:{GIcon:n(305).a,vnodes:{functional:!0,render:function(e,t){return t.props.vnodes}}},data:function(){return{expandIds:[],columns:[]}},props:{checkable:{type:Boolean,default:!1},expandField:{type:String},height:{type:Number},orderBy:{type:Object,default:function(){return{}}},loading:{type:Boolean,default:!1},selectedItems:{type:Array,default:function(){return[]}},dataSource:{type:Array,required:!0,validator:function(e){return e.filter((function(e){return void 0===e.id})).length<=0}},numberVisible:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},striped:{type:Boolean,default:!0}},mounted:function(){var e=this.getScrollBarWidth();this.columns=this.$slots.default.map((function(e){var t=e.componentOptions.propsData;return{text:t.text,field:t.field,width:t.width,render:e.data.scopedSlots&&e.data.scopedSlots.default}}));var t=this.$refs.table.cloneNode(!1);this.table2=t,t.classList.add("wheel-table-copy");var n=this.$refs.table.children[0],i=n.getBoundingClientRect().height;if(this.$refs.tableWrapper.style.marginTop=i+"px",this.$refs.tableWrapper.style.height=this.height-i+"px",t.appendChild(this.$refs.table.children[0]),this.$refs.wrapper.appendChild(t),this.$scopedSlots.default){var r=this.$refs.actions[0],a=r.getBoundingClientRect().width,d=r.parentNode,s=getComputedStyle(d),l=s.getPropertyValue("padding-left"),o=s.getPropertyValue("padding-right"),c=s.getPropertyValue("border-left-width"),u=s.getPropertyValue("border-right-width"),h=a+parseInt(l)+parseInt(o)+parseInt(c)+parseInt(u)+"px";this.$refs.actionsHeader.style.width=h,this.$refs.actions.map((function(e){e.parentNode.style.width=h})),n.children[0].children[1].style.width=parseInt(h)+e+"px"}},beforeDestroy:function(){this.table2.remove()},watch:{selectedItems:function(){this.selectedItems.length===this.dataSource.length?this.$refs.allChecked.indeterminate=!1:this.$refs.allChecked.indeterminate=0!==this.selectedItems.length}},computed:{expandedCellColspan:function(){var e=0;return this.checkable&&(e+=1),this.expandField&&(e+=1),e},areAllItemSelected:function(){var e=this.dataSource.map((function(e){return e.id})).sort(),t=this.selectedItems.map((function(e){return e.id})).sort(),n=!0;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i]){n=!1;break}return n}},methods:{getScrollBarWidth:function(){var e,t=document.createElement("p"),n={width:"100px",height:"100px",overflowY:"scroll"};for(e in n)t.style[e]=n[e];document.body.appendChild(t);var i=t.offsetWidth-t.clientWidth;return t.remove(),i},inExpandedIds:function(e){return this.expandIds.indexOf(e)>=0},expandItem:function(e){this.inExpandedIds(e)?this.expandIds.splice(this.expandIds.indexOf(e),1):this.expandIds.push(e)},onChangeItem:function(e,t,n){var i=n.target.checked,r=JSON.parse(JSON.stringify(this.selectedItems));i?r.push(e):r=r.filter((function(t){return t.id!==e.id})),this.$emit("update:selectedItems",r)},onChangeAllItems:function(e){var t=e.target.checked;this.$emit("update:selectedItems",t?this.dataSource:[])},inSelectedItems:function(e){return this.selectedItems.filter((function(t){return t.id===e.id})).length>0},changeOrderBy:function(e){var t=JSON.parse(JSON.stringify(this.orderBy)),n=t[e];t[e]="asc"===n?"desc":"desc"===n||"asc",this.$emit("update:orderBy",t)}}},r=(n(443),n(41)),a={name:"demo",components:{GTable:Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrapper",staticClass:"wheel-table-wrapper"},[n("div",{ref:"tableWrapper",style:{height:e.height,overflow:"auto"}},[n("table",{ref:"table",staticClass:"wheel-table",class:{bordered:e.bordered,compact:e.compact,striped:e.striped}},[n("thead",[n("tr",[e.expandField?n("th",{staticClass:"wheel-table-center",style:{width:"50px"}}):e._e(),e._v(" "),e.checkable?n("th",{staticClass:"wheel-table-center",style:{width:"50px"}},[n("input",{ref:"allChecked",attrs:{type:"checkbox"},domProps:{checked:e.areAllItemSelected},on:{change:e.onChangeAllItems}})]):e._e(),e._v(" "),e.numberVisible?n("th",{style:{width:"50px"}},[e._v("#")]):e._e(),e._v(" "),e._l(e.columns,(function(t){return n("th",{key:t.field,style:{width:t.width+"px"}},[n("div",{staticClass:"wheel-table-header"},[e._v("\n            "+e._s(t.text)+"\n            "),t.field in e.orderBy?n("span",{staticClass:"wheel-table-sorter",on:{click:function(n){return e.changeOrderBy(t.field)}}},[n("g-icon",{class:{active:"asc"===e.orderBy[t.field]},attrs:{name:"asc"}}),e._v(" "),n("g-icon",{class:{active:"desc"===e.orderBy[t.field]},attrs:{name:"desc"}})],1):e._e()])])})),e._v(" "),e.$scopedSlots.default?n("th",{ref:"actionsHeader"}):e._e()],2)]),e._v(" "),n("tbody",[e._l(e.dataSource,(function(t,i){return[n("tr",{key:t.id},[e.expandField?n("td",{staticClass:"wheel-table-center",style:{width:"50px"}},[n("g-icon",{staticClass:"wheel-table-expandIcon",attrs:{name:"right"},on:{click:function(n){return e.expandItem(t.id)}}})],1):e._e(),e._v(" "),e.checkable?n("td",{staticClass:"wheel-table-center",style:{width:"50px"}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.inSelectedItems(t)},on:{change:function(n){return e.onChangeItem(t,i,n)}}})]):e._e(),e._v(" "),e.numberVisible?n("td",{style:{width:"50px"}},[e._v(e._s(i+1))]):e._e(),e._v(" "),e._l(e.columns,(function(i){return[n("td",{key:i.field,style:{width:i.width+"px"}},[i.render?[n("vnodes",{attrs:{vnodes:i.render({value:t[i.field]})}})]:[e._v("\n                "+e._s(t[i.field])+"\n              ")]],2)]})),e._v(" "),e.$scopedSlots.default?n("td",[n("div",{ref:"actions",refInFor:!0,staticStyle:{display:"inline-block"}},[e._t("default",null,{item:t})],2)]):e._e()],2),e._v(" "),e.inExpandedIds(t.id)?n("tr",{key:t.id+"-expand"},[n("td",{attrs:{colspan:e.columns.length+e.expandedCellColspan}},[e._v("\n            "+e._s(t[e.expandField]||"空")+"\n          ")])]):e._e()]}))],2)])]),e._v(" "),e.loading?n("div",{staticClass:"wheel-table-loading"},[n("g-icon",{attrs:{name:"loading"}})],1):e._e()])}),[],!1,null,"175489a7",null).exports,GButton:n(312).a},data:function(){return{selected:[],loading:!1,columns:[{text:"姓名",field:"name",width:100},{text:"分数",field:"score"}],orderBy:{name:"asc",score:"desc"},dataSource:[{id:1,name:"小红",score:100,description:"xxxxxxxxx xxxxxxxxxxx"},{id:2,name:"小明",score:60,description:"xxxx xxxxxxxxxxx"},{id:3,name:"小强",score:80},{id:4,name:"张三",score:90},{id:5,name:"李四",score:80},{id:6,name:"王五",score:80},{id:7,name:"蜘蛛侠",score:70},{id:8,name:"蝙蝠侠",score:80},{id:9,name:"小红",score:100},{id:10,name:"小明",score:60},{id:11,name:"小强",score:80},{id:12,name:"张三",score:90},{id:13,name:"李四",score:80},{id:14,name:"王五",score:80},{id:15,name:"蜘蛛侠",score:70},{id:16,name:"超人",score:80},{id:17,name:"李四",score:80},{id:18,name:"王五",score:80},{id:19,name:"蜘蛛侠",score:70},{id:20,name:"蝙蝠侠",score:80}]}},methods:{edit:function(e){alert("开始编辑".concat(e.id))},view:function(e){alert("开始查看".concat(e.id))},x:function(){var e=this;this.loading=!0,setTimeout((function(){e.dataSource=e.dataSource.sort((function(e,t){return e.score-t.score})),e.loading=!1}),500)}}},d=(n(444),Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{padding:"20px"}},[n("g-table",{attrs:{columns:e.columns,"data-source":e.dataSource,bordered:"","selected-items":e.selected,"order-by":e.orderBy,loading:e.loading,height:400,"expand-field":"description",checkable:""},on:{"update:selectedItems":function(t){e.selected=t},"update:selected-items":function(t){e.selected=t},"update:orderBy":[function(t){e.orderBy=t},e.x],"update:order-by":function(t){e.orderBy=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("g-button",{attrs:{size:"small"},on:{click:function(n){return e.edit(t.item)}}},[e._v("编辑")]),e._v(" "),n("g-button",{attrs:{size:"small"},on:{click:function(n){return e.view(t.item)}}},[e._v("查看")])]}}])})],1)])}),[],!1,null,null,null));t.default=d.exports}}]);